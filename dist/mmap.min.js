!function(t,e){function n(t,n){const a=e.select(t).style("overflow","hidden"),o=a.append("svg").attr("width","100%").attr("height","100%").append("g").call(i);o.append("rect").attr("width","100%").attr("height","100%").attr("fill","transparent").attr("pointer-events","all"),d.mmap=o.append("g").attr("class","mmap"),d.nodes=e.map(),d.counter=0,d.nodes.set("node"+d.counter,{x:parseInt(a.style("width"))/2,y:parseInt(a.style("height"))/2,background:"#f5f5f5",color:"#8d9f8e",font:18,name:"Root node"}),d.selected=d.nodes.get("node0"),l()}function a(){d.mmap.attr("transform","translate("+e.event.transform.x+","+e.event.transform.y+")scale("+e.event.transform.k+")")}function o(t){const n=e.select(this);n.attr("transform","translate("+(t.x=e.event.x)+","+(t.y=e.event.y)+")"),e.selectAll(".link").attr("d",t=>s(t,t.parent))}function r(t){d.selected=t}function s(t,e){return`M ${t.x} ${t.y}
              C ${(t.x+e.x)/2} ${t.y},
                ${(t.x+e.x)/2} ${e.y},
                ${e.x} ${e.y}`}function l(){const t=d.nodes.values(),e=d.mmap.selectAll(".node").data(t),n=e.enter().append("g").attr("class","node").attr("transform",t=>"translate("+t.x+","+t.y+")").call(f),a=n.append("ellipse").style("fill",t=>t.background),o=n.append("text").text(t=>t.name).style("fill",t=>t.color).style("font-size",t=>t.font);a.attr("rx",parseInt(o.style("width"))/2+25),a.attr("ry",parseInt(o.style("height"))/2+16),o.attr("dy",parseInt(o.style("height"))/2-5),e.exit().remove();const r=d.mmap.selectAll(".link").data(t.slice(1));r.enter().insert("path","g").attr("class","link").style("stroke",t=>t.color).attr("d",t=>s(t,t.parent)),r.exit().remove()}function c(t){d.selected&&d.selected.name&&(d.nodes.set("node"+ ++d.counter,{parent:d.selected,x:d.selected.x+200,y:d.selected.y+50,background:t.background||"#e6e6e6",color:t.color||"#6f6f6f",font:t.font||15,name:t.name||"Node"}),l())}const d={},i=e.zoom().scaleExtent([.5,5]).on("zoom",a),f=e.drag().on("drag",o).on("start",r);e.line().x(t=>t.x).y(t=>t.y).curve(e.curveCatmullRom.alpha(.5));t.mmap={init:n,createNode:c}}(this,window.d3);