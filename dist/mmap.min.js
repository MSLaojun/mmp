!function(t,e){function n(t,n){c.width=900,c.height=600,c.nodes=[{x:c.width/2,y:c.height/2,bgColor:"#868f78",textColor:"#e3e3e3",fontSize:19,text:"Map name"}],c.dom={};const r=e.select(t).append("svg").attr("width",c.width).attr("height",c.height).append("g").call(d);r.append("rect").attr("width",c.width).attr("height",c.height).attr("fill","#ececec").attr("pointer-events","all"),c.dom.mmap=r.append("g")}function r(){const t=c.dom.mmap.selectAll("g").data(c.nodes).enter().append("g").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).attr("cursor","pointer").call(f),e=t.append("ellipse").attr("fill",function(t){return t.bgColor}),n=t.append("text").text(function(t){return t.text}).attr("font-family","sans-serif").attr("font-size",function(t){return t.fontSize}).attr("text-anchor","middle").attr("fill",function(t){return t.textColor});e.attr("rx",parseInt(n.style("width"))/2+25),e.attr("ry",parseInt(n.style("height"))/2+16),n.attr("dy",parseInt(n.style("height"))/2-5)}function o(){c.dom.mmap.attr("transform","translate("+e.event.transform.x+","+e.event.transform.y+")scale("+e.event.transform.k+")")}function a(){e.event.sourceEvent.stopPropagation(),e.select(this).classed("dragging",!0)}function i(t){e.select(this).attr("transform","translate("+(t.x=e.event.x)+","+(t.y=e.event.y)+")")}function s(){e.select(this).classed("dragging",!1)}function l(t){c.nodes.push({x:t.x,y:t.y,bgColor:t.bgColor,textColor:t.textColor,fontSize:t.fontSize,text:t.text}),r()}const c={},d=e.zoom().scaleExtent([.5,10]).on("zoom",o),f=e.drag().on("start",a).on("drag",i).on("end",s);t.mmap={init:n,createNode:l}}(this,window.d3);