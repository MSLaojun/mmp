!function(t,e){function n(t,n){const a=e.select(t).style("overflow","hidden"),o=a.append("svg").attr("width","100%").attr("height","100%").append("g").call(f);o.append("rect").attr("width","100%").attr("height","100%").attr("fill","transparent").attr("pointer-events","all"),i.mmap=o.append("g").attr("class","mmap"),i.nodes=e.map(),i.counter=0,i.nodes.set("node"+i.counter,{x:parseInt(a.style("width"))/2,y:parseInt(a.style("height"))/2,background:"#f5f5f5",color:"#8d9f8e",font:18,name:"Root node"}),i.selected=i.nodes.get("node0"),s()}function a(){i.mmap.attr("transform","translate("+e.event.transform.x+","+e.event.transform.y+")scale("+e.event.transform.k+")")}function o(t){const n=e.select(this);n.attr("transform","translate("+(t.x=e.event.x)+","+(t.y=e.event.y)+")"),e.selectAll(".link").attr("d",t=>r(t))}function r(t){return`M ${t.parent.x} ${t.parent.y}
            C ${(t.parent.x+t.x)/2} ${t.parent.y},
              ${(t.parent.x+t.x)/2} ${t.y},
              ${t.x-50} ${t.y+50}
            C ${(t.x+t.parent.x)/2+10} ${t.y},
              ${(t.x+t.parent.x)/2+10} ${t.parent.y},
              ${t.parent.x+10} ${t.parent.y+10}`}function s(){const t=i.nodes.values(),e=i.mmap.selectAll(".node").data(t),n=e.enter().append("g").attr("class","node").attr("transform",t=>"translate("+t.x+","+t.y+")").call(p),a=n.append("ellipse").style("fill",t=>t.background),o=n.append("text").text(t=>t.name).style("fill",t=>t.color).style("font-size",t=>t.font);a.attr("rx",parseInt(o.style("width"))/2+25),a.attr("ry",parseInt(o.style("height"))/2+16),o.attr("dy",parseInt(o.style("height"))/2-5),e.exit().remove();const s=i.mmap.selectAll(".link").data(t.slice(1));s.enter().insert("path","g").attr("class","link").style("fill",t=>t.color).style("stroke",t=>t.color).attr("d",t=>r(t)),s.exit().remove()}function l(t){i.selected&&i.selected.name&&(i.nodes.set("node"+ ++i.counter,{parent:i.selected,x:i.selected.x+200,y:i.selected.y+50,background:t.background||"#e6e6e6",color:t.color||"#6f6f6f",font:t.font||15,name:t.name||"Node"}),s())}function c(){return i.nodes.values()}function d(t){i.selected=t}const i={},f=e.zoom().scaleExtent([.5,5]).on("zoom",a),p=e.drag().on("drag",o).on("start",d);t.mmap={init:n,createNode:l,getNodes:c,selectNode:d}}(this,window.d3);